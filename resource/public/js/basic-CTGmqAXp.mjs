var V=(y,m,n)=>new Promise((g,p)=>{var w=s=>{try{f(n.next(s))}catch(c){p(c)}},o=s=>{try{f(n.throw(s))}catch(c){p(c)}},f=s=>s.done?g(s.value):Promise.resolve(s.value).then(w,o);f((n=n.apply(y,m)).next())});import{M as I,a as N,b as q,c as j,u as G,_ as Q,C as F,d as K,N as H,e as O,f as D}from"./layout.vue_vue_type_script_setup_true_lang-Dd2QkaD_.mjs";import{c as W,_ as R}from"./button.vue_vue_type_script_setup_true_lang-DJjG6SQm.mjs";import"./load-Bk7_QC4W.mjs";import{$ as l,c as z,w as J,k as X,b as Y,p as Z,u as ee,s as te,P as ae,a as A}from"./bootstrap-5eopxyZm.mjs";import{T as oe}from"./auth-title-4CA0qdkD.mjs";import{_ as $}from"./theme-toggle.vue_vue_type_script_setup_true_lang-D6_G1vta.mjs";import{a6 as B,aF as d,aJ as b,aK as _,aW as h,aa as e,n as r,aH as u,T as se,J as P,aQ as C,ao as M,aX as v,aG as x,aZ as U,a_ as re,S as ne,aU as le,P as ie,bf as S,a0 as ue}from"../jse/index-index-CmiOfTxA.mjs";import{_ as de}from"./input.vue_vue_type_script_setup_true_lang-dAgNxpnQ.mjs";import{_ as me}from"./input-password.vue_vue_type_script_setup_true_lang-CFVvPPFS.mjs";import{_ as ce}from"./checkbox.vue_vue_type_script_setup_true_lang-DLynaWr5.mjs";import{x as pe}from"./index-rzVbSPMH.mjs";import"./rotate-cw-rmvLH5uc.mjs";const fe=W("BookOpenTextIcon",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]),he={class:"w-full sm:mx-auto md:max-w-md"},ge={class:"mt-4 flex items-center justify-between"},we={class:"text-muted-foreground text-center text-xs uppercase"},ve={class:"mt-4 flex flex-wrap justify-center"},be=B({name:"ThirdPartyLogin",__name:"third-party-login",setup(y){return(m,n)=>(d(),b("div",he,[_("div",ge,[n[0]||(n[0]=_("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1)),_("span",we,h(e(l)("authentication.thirdPartyLogin")),1),n[1]||(n[1]=_("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1))]),_("div",ve,[r(e($),{class:"mb-3"},{default:u(()=>[r(e(I))]),_:1}),r(e($),{class:"mb-3"},{default:u(()=>[r(e(N))]),_:1}),r(e($),{class:"mb-3"},{default:u(()=>[r(e(q))]),_:1}),r(e($),{class:"mb-3"},{default:u(()=>[r(e(j))]),_:1})])]))}}),ye=["onKeydown"],_e={class:"text-muted-foreground"},ke={key:0,class:"mb-6 mt-4 flex justify-between"},Me={key:0,class:"flex-center"},Pe={key:1,class:"mb-2 mt-4 flex items-center justify-between"},Le={key:0,class:"mt-3 text-center text-sm"},$e=B({name:"AuthenticationLogin",__name:"login",props:{codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},passwordPlaceholder:{default:""},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},usernamePlaceholder:{default:""}},emits:["submit"],setup(y,{emit:m}){const n=m,g=z(),p=`REMEMBER_ME_USERNAME_${location.hostname}`,w=localStorage.getItem(p)||"",o=se({password:"",rememberMe:!!w,submitted:!1,username:w}),f=P(()=>o.submitted&&!o.username?"error":"default"),s=P(()=>o.submitted&&!o.password?"error":"default");function c(){o.submitted=!0,!(f.value!=="default"||s.value!=="default")&&(localStorage.setItem(p,o.rememberMe?o.username:""),n("submit",{password:o.password,username:o.username}))}function k(t){g.push(t)}return(t,a)=>(d(),b("div",{onKeydown:J(X(c,["prevent"]),["enter"])},[C(t.$slots,"title",{},()=>[r(oe,null,{desc:u(()=>[_("span",_e,h(t.subTitle||e(l)("authentication.loginSubtitle")),1)]),default:u(()=>[M(h(t.title||`${e(l)("authentication.welcomeBack")} ðŸ‘‹ðŸ»`)+" ",1)]),_:1})]),r(e(de),{modelValue:o.username,"onUpdate:modelValue":a[0]||(a[0]=i=>o.username=i),autofocus:!1,"error-tip":e(l)("authentication.usernameTip"),label:e(l)("authentication.username"),placeholder:t.usernamePlaceholder||e(l)("authentication.username"),status:f.value,name:"username",required:"",type:"text"},null,8,["modelValue","error-tip","label","placeholder","status"]),r(e(me),{modelValue:o.password,"onUpdate:modelValue":a[1]||(a[1]=i=>o.password=i),"error-tip":e(l)("authentication.passwordTip"),label:e(l)("authentication.password"),placeholder:t.passwordPlaceholder||e(l)("authentication.password"),status:s.value,name:"password",required:"",type:"password"},null,8,["modelValue","error-tip","label","placeholder","status"]),t.showRememberMe||t.showForgetPassword?(d(),b("div",ke,[t.showRememberMe?(d(),b("div",Me,[r(e(ce),{checked:o.rememberMe,"onUpdate:checked":a[2]||(a[2]=i=>o.rememberMe=i),name:"rememberMe"},{default:u(()=>[M(h(e(l)("authentication.rememberMe")),1)]),_:1},8,["checked"])])):v("",!0),t.showForgetPassword?(d(),b("span",{key:1,class:"text-primary hover:text-primary-hover active:text-primary-active cursor-pointer text-sm font-normal",onClick:a[3]||(a[3]=i=>k(t.forgetPasswordPath))},h(e(l)("authentication.forgetPassword")),1)):v("",!0)])):v("",!0),r(e(R),{loading:t.loading,class:"w-full",onClick:c},{default:u(()=>[M(h(e(l)("common.login")),1)]),_:1},8,["loading"]),t.showCodeLogin||t.showQrcodeLogin?(d(),b("div",Pe,[t.showCodeLogin?(d(),x(e(R),{key:0,class:"w-1/2",variant:"outline",onClick:a[4]||(a[4]=i=>k(t.codeLoginPath))},{default:u(()=>[M(h(e(l)("authentication.mobileLogin")),1)]),_:1})):v("",!0),t.showQrcodeLogin?(d(),x(e(R),{key:1,class:"ml-4 w-1/2",variant:"outline",onClick:a[5]||(a[5]=i=>k(t.qrCodeLoginPath))},{default:u(()=>[M(h(e(l)("authentication.qrcodeLogin")),1)]),_:1})):v("",!0)])):v("",!0),C(t.$slots,"third-party-login",{},()=>[t.showThirdPartyLogin?(d(),x(be,{key:0})):v("",!0)]),C(t.$slots,"to-register",{},()=>[t.showRegister?(d(),b("div",Le,[M(h(e(l)("authentication.accountTip"))+" ",1),_("span",{class:"text-primary hover:text-primary-hover active:text-primary-active cursor-pointer text-sm font-normal",onClick:a[6]||(a[6]=i=>k(t.registerPath))},h(e(l)("authentication.createAccount")),1)])):v("",!0)])],40,ye))}}),xe=B({name:"LoginExpiredModal",__name:"login-expired-modal",props:U({avatar:{default:""},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},passwordPlaceholder:{},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},usernamePlaceholder:{}},{open:{type:Boolean},openModifiers:{}}),emits:U(["submit"],["update:open"]),setup(y,{emit:m}){const n=y,g=m,p=re(y,"open"),w=pe(n,g),[o,f]=G();return ne(()=>p.value,s=>{f.setState({isOpen:s})}),(s,c)=>(d(),b("div",null,[r(e(o),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:u(()=>[r(e(Q),{src:s.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),r($e,le(e(w),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":s.$t("authentication.loginAgainSubTitle"),title:s.$t("authentication.loginAgainTitle")}),null,16,["sub-title","title"])]),_:1})]))}}),Ge=B({__name:"basic",setup(y){const m=ie([{avatar:"https://avatar.vercel.sh/vercel.svg?text=VB",date:"3å°æ—¶å‰",isRead:!0,message:"æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯",title:"æ”¶åˆ°äº† 14 ä»½æ–°å‘¨æŠ¥"},{avatar:"https://avatar.vercel.sh/1",date:"åˆšåˆš",isRead:!1,message:"æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯",title:"æœ±åå³ å›žå¤äº†ä½ "},{avatar:"https://avatar.vercel.sh/1",date:"2024-01-01",isRead:!1,message:"æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯",title:"æ›²ä¸½ä¸½ è¯„è®ºäº†ä½ "},{avatar:"https://avatar.vercel.sh/satori",date:"1å¤©å‰",isRead:!1,message:"æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯",title:"ä»£åŠžæé†’"}]),n=Y(),g=Z(),p=ee(),w=P(()=>m.value.some(a=>!a.isRead)),o=P(()=>[{handler:()=>{S(ae,{target:"_blank"})},icon:fe,text:l("widgets.document")},{handler:()=>{S(A,{target:"_blank"})},icon:q,text:"GitHub"},{handler:()=>{S(`${A}/issues`,{target:"_blank"})},icon:F,text:l("widgets.qa")}]),{loginLoading:f}=te(g),s=P(()=>{var a,i;return(i=(a=n.userInfo)==null?void 0:a.avatar)!=null?i:ue.app.defaultAvatar});function c(){return V(this,null,function*(){yield g.logout(!1)})}function k(){m.value=[]}function t(){m.value.forEach(a=>a.isRead=!0)}return(a,i)=>(d(),x(e(D),{onClearPreferencesAndLogout:c},{"user-dropdown":u(()=>{var L,T,E;return[r(e(K),{avatar:s.value,description:(L=e(n).userInfo)==null?void 0:L.email,menus:o.value,"tag-text":(T=e(n).userInfo)==null?void 0:T.roles[0],text:(E=e(n).userInfo)==null?void 0:E.realName,onLogout:c},null,8,["avatar","description","menus","tag-text","text"])]}),notification:u(()=>[r(e(H),{dot:w.value,notifications:m.value,onClear:k,onMakeAll:t},null,8,["dot","notifications"])]),extra:u(()=>[r(e(xe),{open:e(p).loginExpired,"onUpdate:open":i[0]||(i[0]=L=>e(p).loginExpired=L),avatar:s.value,loading:e(f),"password-placeholder":"123456","username-placeholder":"vben",onSubmit:e(g).authLogin},null,8,["open","avatar","loading","onSubmit"])]),"lock-screen":u(()=>[r(e(O),{avatar:s.value,onToLogin:c},null,8,["avatar"])]),_:1}))}});export{Ge as default};
