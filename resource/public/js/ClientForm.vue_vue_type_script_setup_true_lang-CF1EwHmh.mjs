import{_ as ae}from"./Secret.vue_vue_type_script_setup_true_name_Secret_lang-LTbEl4Zr.mjs";import{f as le}from"./bootstrap-5eopxyZm.mjs";import{a6 as te,J as k,P as V,T as ne,aI as s,aF as v,aG as _,aH as n,n as l,aK as oe,aW as I,ao as u,aJ as f,aX as U,F as A}from"../jse/index-index-CmiOfTxA.mjs";const ie=new Map([["authorization_code","Authorization Code"],["client_credentials","Client Credentials"],["implicit","Implicit"],["password","Password"],["refresh_token","Refresh Token"],["urn:ietf:params:oauth:grant-type:device_code","Device Code"]]),se={key:0,class:"editable-row-operations"},ue={key:0},de={key:1},re={key:1},pe={key:2},fe=te({__name:"ClientForm",props:{client:{}},setup(j,{expose:E}){const F=j,a=k(()=>F.client),x=V("1"),y=V(),K=[{label:"openid",value:"openid"},{label:"profile",value:"profile"},{label:"email",value:"email"},{label:"address",value:"address"},{label:"phone",value:"phone"}],w=k({get(){return a.value.scopes.split(" ")},set(o){a.value.scopes=o.join(" ")}}),B=()=>y.value.validate().then(()=>!0).catch(o=>(console.log("error submit:",o),!1)),D=()=>{y.value.resetFields()},G=k(()=>{const o=[];return ie.forEach((e,i)=>{o.push({label:e,value:i})}),o}),N=k({get(){return a.value.grantTypes.split(" ")},set(o){a.value.grantTypes=o.join(" ")}}),T=k({get(){return(a.value.redirectUris?a.value.redirectUris.split(" "):[]).join(`
`)},set(o){const e=o.split(`
`);a.value.redirectUris=e.join(" ")}}),O={style:{width:"150px"}},$={span:14},L={clientName:[{required:!0,message:"Please input Client name",trigger:"change"},{min:3,max:25,message:"Length should be 3 to 25",trigger:"blur"}],clientId:[{required:!0,message:"Please input Client Id",trigger:"change"},{min:3,max:25,message:"Length should be 3 to 25",trigger:"blur"}],scopes:[{required:!0,message:"Scopes cannot be empty",trigger:"change"}],grantTypes:[{required:!0,message:"GrantTypes cannot be empty",trigger:"change"}]};E({validate:B,resetForm:D,model:a});const g=k(()=>{if(a.value.claims===void 0||a.value.claims===null)return[];const o=a.value.claims,e=Object.entries(o),i=[];let r=1;return e.forEach(m=>{i.push({id:r,Name:m[0],Value:m[1]}),r++}),i}),h=()=>{console.log("newClaims",a.value),(a.value.claims===void 0||a.value.claims===null)&&(a.value.claims={}),a.value.claims.NewClaims="Value"},d=ne({}),z=[{title:"Id",dataIndex:"id"},{title:"Name",dataIndex:"Name"},{title:"Value",dataIndex:"Value"},{title:"Operation",dataIndex:"operation"}],J=o=>{d[o]=le(g.value.find(e=>o===e.id))},H=o=>{console.log("save",d[o]);const e=g.value.find(r=>r.id===o).Name,i=d[o];e!==i.Name&&delete a.value.claims[e],a.value.claims[i.Name]=i.Value,delete d[o]},M=o=>{delete a.value.claims[g.value.find(e=>o===e.id).Name]},W=o=>{delete d[o]};return(o,e)=>{const i=s("a-form-item"),r=s("a-checkbox"),m=s("a-input"),X=s("a-image"),q=s("a-textarea"),R=s("a-select"),Q=s("a-form"),C=s("a-tab-pane"),b=s("a-button"),P=s("a-divider"),Y=s("a-popconfirm"),Z=s("a-table"),ee=s("a-tabs");return v(),_(ee,null,{default:n(()=>[l(C,{key:"1",activeKey:x.value,"onUpdate:activeKey":e[15]||(e[15]=t=>x.value=t),tab:"Base Info"},{default:n(()=>[l(Q,{ref_key:"form",ref:y,"label-col":O,model:a.value,rules:L,"wrapper-col":$},{default:n(()=>[l(i,{label:"Id"},{default:n(()=>[oe("label",null,I(a.value.id),1)]),_:1}),l(i,{label:"Enabled"},{default:n(()=>[l(r,{checked:a.value.enabled,"onUpdate:checked":e[0]||(e[0]=t=>a.value.enabled=t)},null,8,["checked"])]),_:1}),l(i,{label:"Client name",name:"clientName",required:""},{default:n(()=>[l(m,{value:a.value.clientName,"onUpdate:value":e[1]||(e[1]=t=>a.value.clientName=t)},null,8,["value"])]),_:1}),l(i,{label:"Client Id",name:"clientId",required:""},{default:n(()=>[l(m,{value:a.value.clientId,"onUpdate:value":e[2]||(e[2]=t=>a.value.clientId=t)},null,8,["value"])]),_:1}),l(i,{label:" "},{default:n(()=>[l(r,{checked:a.value.requireConsent,"onUpdate:checked":e[3]||(e[3]=t=>a.value.requireConsent=t)},{default:n(()=>e[16]||(e[16]=[u(" Require consent ")])),_:1},8,["checked"]),l(r,{checked:a.value.requireSecret,"onUpdate:checked":e[4]||(e[4]=t=>a.value.requireSecret=t)},{default:n(()=>e[17]||(e[17]=[u(" Require Secret ")])),_:1},8,["checked"]),l(r,{checked:a.value.requirePkce,"onUpdate:checked":e[5]||(e[5]=t=>a.value.requirePkce=t)},{default:n(()=>e[18]||(e[18]=[u(" Require PKCE ")])),_:1},8,["checked"]),l(r,{checked:a.value.allowRememberConsent,"onUpdate:checked":e[6]||(e[6]=t=>a.value.allowRememberConsent=t)},{default:n(()=>e[19]||(e[19]=[u(" Allow Remember Concent ")])),_:1},8,["checked"]),l(r,{checked:a.value.alwaysIncludeUserClaimsInIdToken,"onUpdate:checked":e[7]||(e[7]=t=>a.value.alwaysIncludeUserClaimsInIdToken=t)},{default:n(()=>e[20]||(e[20]=[u(" Always Include user claims in dToken ")])),_:1},8,["checked"]),l(r,{checked:a.value.allowPlainTextPkce,"onUpdate:checked":e[8]||(e[8]=t=>a.value.allowPlainTextPkce=t)},{default:n(()=>e[21]||(e[21]=[u(" Allow Plain Text Pkce ")])),_:1},8,["checked"])]),_:1}),l(i,{label:"Client Url"},{default:n(()=>[l(m,{value:a.value.clientURI,"onUpdate:value":e[9]||(e[9]=t=>a.value.clientURI=t)},null,8,["value"])]),_:1}),l(i,{label:"Client Logo Url"},{default:n(()=>[l(X,{src:o.client.logoURI,height:"32px",width:"32px"},null,8,["src"]),l(m,{value:a.value.logoURI,"onUpdate:value":e[10]||(e[10]=t=>a.value.logoURI=t)},null,8,["value"])]),_:1}),l(i,{label:"Description"},{default:n(()=>[l(q,{value:a.value.description,"onUpdate:value":e[11]||(e[11]=t=>a.value.description=t)},null,8,["value"])]),_:1}),l(i,{label:"Grant types",name:"GrantTypes"},{default:n(()=>[l(R,{value:N.value,"onUpdate:value":e[12]||(e[12]=t=>N.value=t),options:G.value,mode:"multiple"},null,8,["value","options"])]),_:1}),l(i,{label:"Scopes",name:"Scopes"},{default:n(()=>[l(R,{value:w.value,"onUpdate:value":e[13]||(e[13]=t=>w.value=t),options:K,mode:"multiple"},null,8,["value"])]),_:1}),l(i,{label:"Redirect Uris"},{default:n(()=>[l(q,{value:T.value,"onUpdate:value":e[14]||(e[14]=t=>T.value=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["activeKey"]),l(C,{key:"2",tab:"Claims"},{default:n(()=>[l(b,{type:"primary",onClick:h},{default:n(()=>e[22]||(e[22]=[u("Add")])),_:1}),l(Z,{columns:z,"data-source":g.value},{bodyCell:n(({column:t,text:S,record:p})=>[t.dataIndex==="operation"?(v(),f("div",se,[d[p.id]?(v(),f("span",ue,[l(b,{type:"link",onClick:c=>H(p.id)},{default:n(()=>e[23]||(e[23]=[u("Save")])),_:2},1032,["onClick"]),l(P,{type:"vertical"}),l(Y,{title:"Sure to cancel?",onConfirm:c=>W(p.id)},{default:n(()=>[l(b,{type:"link"},{default:n(()=>e[24]||(e[24]=[u("Cancel")])),_:1})]),_:2},1032,["onConfirm"])])):(v(),f("span",de,[l(b,{type:"link",onClick:c=>J(p.id)},{default:n(()=>e[25]||(e[25]=[u(" Edit ")])),_:2},1032,["onClick"]),l(P,{type:"vertical"}),l(b,{type:"link",onClick:c=>M(p.id)},{default:n(()=>e[26]||(e[26]=[u(" Remove ")])),_:2},1032,["onClick"])]))])):U("",!0),t.dataIndex==="Name"?(v(),f("div",re,[d[p.id]?(v(),_(m,{key:0,value:d[p.id][t.dataIndex],"onUpdate:value":c=>d[p.id][t.dataIndex]=c,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(v(),f(A,{key:1},[u(I(S),1)],64))])):U("",!0),t.dataIndex==="Value"?(v(),f("div",pe,[d[p.id]?(v(),_(m,{key:0,value:d[p.id][t.dataIndex],"onUpdate:value":c=>d[p.id][t.dataIndex]=c,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(v(),f(A,{key:1},[u(I(S),1)],64))])):U("",!0)]),_:1},8,["data-source"])]),_:1}),l(C,{key:"secrets",tab:"Secrets"},{default:n(()=>[l(ae,{"client-id":a.value.id},null,8,["client-id"])]),_:1})]),_:1})}}});export{fe as _};
