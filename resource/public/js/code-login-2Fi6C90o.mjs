var U=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var C=(n,r)=>{var l={};for(var o in n)H.call(n,o)&&r.indexOf(o)<0&&(l[o]=n[o]);if(n!=null&&U)for(var o of U(n))r.indexOf(o)<0&&J.call(n,o)&&(l[o]=n[o]);return l};var w=(n,r,l)=>new Promise((o,u)=>{var a=t=>{try{c(l.next(t))}catch(i){u(i)}},s=t=>{try{c(l.throw(t))}catch(i){u(i)}},c=t=>t.done?o(t.value):Promise.resolve(t.value).then(a,s);c((l=l.apply(n,r)).next())});import{c as O,$ as d,w as q,L as R}from"./bootstrap-5eopxyZm.mjs";import{T as D}from"./auth-title-4CA0qdkD.mjs";import{_ as E}from"./input.vue_vue_type_script_setup_true_lang-dAgNxpnQ.mjs";import{x as Q,_ as W,I as K,O as X,a as Y}from"./index-rzVbSPMH.mjs";import{a6 as v,J as m,aF as p,aG as y,aH as f,aQ as j,aU as $,aa as e,aS as S,aZ as F,a_ as Z,P as B,S as ee,aJ as N,aK as z,aW as h,n as b,F as te,aY as ae,ao as P,aR as oe,aX as ne,T as le,ad as se}from"../jse/index-index-CmiOfTxA.mjs";import{_ as k}from"./button.vue_vue_type_script_setup_true_lang-DJjG6SQm.mjs";const re=v({__name:"PinInput",props:{class:{},modelValue:{},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},name:{},disabled:{type:Boolean},required:{type:Boolean},id:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue","complete"],setup(n,{emit:r}){const l=n,o=r,u=m(()=>{const t=l,{class:s}=t;return C(t,["class"])}),a=Q(u,o);return(s,c)=>(p(),y(e(W),$(e(a),{class:e(S)("flex items-center gap-2",l.class)}),{default:f(()=>[j(s.$slots,"default")]),_:3},16,["class"]))}}),ue=v({__name:"PinInputGroup",props:{class:{},asChild:{type:Boolean},as:{}},setup(n){const r=n,l=m(()=>{const s=r,{class:u}=s;return C(s,["class"])}),o=K(l);return(u,a)=>(p(),y(e(X),$(e(o),{class:e(S)("flex items-center",r.class)}),{default:f(()=>[j(u.$slots,"default")]),_:3},16,["class"]))}}),de=v({__name:"PinInputInput",props:{class:{},index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const r=n,l=m(()=>{const s=r,{class:u}=s;return C(s,["class"])}),o=K(l);return(u,a)=>(p(),y(e(Y),$(e(o),{class:e(S)("border-input bg-background relative flex h-10 w-10 items-center justify-center border-y border-r text-center text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md focus:relative focus:z-10 focus:outline-none focus:ring-2",r.class)}),null,16,["class"]))}}),ie={class:"relative mb-6"},ce=["for"],me={key:0,class:"text-destructive bottom-130 absolute mt-1 text-xs"},pe=v({inheritAttrs:!1,__name:"input",props:F({btnLoading:{type:Boolean,default:!1},btnText:{},class:{},codeLength:{default:6},errorTip:{},handleSendCode:{type:Function,default:()=>w(void 0,null,function*(){})},label:{},name:{},status:{}},{modelValue:{},modelModifiers:{}}),emits:F(["complete"],["update:modelValue"]),setup(n,{emit:r}){const l=n,o=r,u=Z(n,"modelValue"),a=B([]),s=m(()=>l.status==="error"?"border-destructive":"");ee(()=>u.value,()=>{var t,i;a.value=(i=(t=u.value)==null?void 0:t.split(""))!=null?i:[]});function c(t){u.value=t.join(""),o("complete")}return(t,i)=>(p(),N("div",ie,[z("label",{for:t.name,class:"mb-2 block text-sm font-medium"},h(t.label),9,ce),b(e(re),{id:t.name,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=g=>a.value=g),class:oe([s.value,"flex justify-between"]),otp:"",placeholder:"â—‹",type:"number",onComplete:c},{default:f(()=>[b(e(ue),null,{default:f(()=>[(p(!0),N(te,null,ae(t.codeLength,(g,V)=>(p(),y(e(de),{key:g,index:V},null,8,["index"]))),128))]),_:1}),b(e(k),{loading:t.btnLoading,class:"w-[300px] xl:w-full",size:"lg",variant:"outline",onClick:t.handleSendCode},{default:f(()=>[P(h(t.btnText),1)]),_:1},8,["loading","onClick"])]),_:1},8,["id","modelValue","class"]),t.status==="error"?(p(),N("p",me,h(t.errorTip),1)):ne("",!0)]))}}),fe={class:"text-muted-foreground"},be=v({name:"AuthenticationCodeLogin",__name:"code-login",props:{loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"}},emits:["submit"],setup(n,{emit:r}){const l=n,o=r,u=O(),a=le({code:"",phoneNumber:"",requirePhoneNumber:!1,submitted:!1}),s=B(0),c=B(),t=m(()=>/^1[3-9]\d{9}$/.test(a.phoneNumber)),i=m(()=>s.value>0?d("authentication.sendText",[s.value]):d("authentication.sendCode")),g=m(()=>s.value>0),V=m(()=>(a.submitted||a.requirePhoneNumber)&&!t.value?"error":"default"),L=m(()=>a.submitted&&!a.code?"error":"default");function T(){a.submitted=!0,!(V.value!=="default"||L.value!=="default")&&o("submit",{code:a.code,phoneNumber:a.phoneNumber})}function A(){u.push(l.loginPath)}function G(){return w(this,null,function*(){if(!g.value){if(!t.value){a.requirePhoneNumber=!0;return}s.value=60,I()}})}function I(){s.value>0&&(c.value=setTimeout(()=>{s.value--,I()},1e3))}return se(()=>{s.value=0,clearTimeout(c.value)}),(M,_)=>(p(),N("div",null,[b(D,null,{desc:f(()=>[z("span",fe,h(e(d)("authentication.codeSubtitle")),1)]),default:f(()=>[P(h(e(d)("authentication.welcomeBack"))+" ðŸ“² ",1)]),_:1}),b(e(E),{modelValue:a.phoneNumber,"onUpdate:modelValue":_[0]||(_[0]=x=>a.phoneNumber=x),autofocus:!0,"error-tip":e(d)("authentication.mobile-tip"),label:e(d)("authentication.mobile"),placeholder:e(d)("authentication.mobile"),status:V.value,name:"phoneNumber",type:"number",onKeyup:q(T,["enter"])},null,8,["modelValue","error-tip","label","placeholder","status"]),b(e(pe),{modelValue:a.code,"onUpdate:modelValue":_[1]||(_[1]=x=>a.code=x),"btn-loading":g.value,"btn-text":i.value,"code-length":4,"error-tip":e(d)("authentication.codeTip"),"handle-send-code":G,label:e(d)("authentication.code"),placeholder:e(d)("authentication.code"),status:L.value,name:"password",onKeyup:q(T,["enter"])},null,8,["modelValue","btn-loading","btn-text","error-tip","label","placeholder","status"]),b(e(k),{loading:M.loading,class:"mt-2 w-full",onClick:T},{default:f(()=>[P(h(e(d)("common.login")),1)]),_:1},8,["loading"]),b(e(k),{class:"mt-4 w-full",variant:"outline",onClick:_[2]||(_[2]=x=>A())},{default:f(()=>[P(h(e(d)("common.back")),1)]),_:1})]))}}),Ce=v({name:"CodeLogin",__name:"code-login",setup(n){const r=B(!1);function l(o){return w(this,null,function*(){console.log(o)})}return(o,u)=>(p(),y(e(be),{loading:r.value,"login-path":e(R),onSubmit:l},null,8,["loading","login-path"]))}});export{Ce as default};
